{"entries":[{"timestamp":1756913859302,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":1881,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":321,"diffs":[[1,""]]}]}]},{"timestamp":1756913882585,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":3190,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"device_forever\" x=\"205\" y=\"0\"></block><block type=\"pxt-on-start\" x=\"32\" y=\"52\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"141\" y=\"327\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":104,"diffs":[[1,""]]},{"start1":43,"length1":40,"diffs":[[1,""]]},{"start1":321,"length1":0,"diffs":[[1,"basic.forever(function () {\n\t\n})\n"]]}]}]},{"timestamp":1756949711066,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":2301,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"32\" y=\"52\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"31\" y=\"300\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">kdkdkd</field></shadow></value></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"radio_on_string_drag\" x=\"528\" y=\"304\"><value name=\"HANDLER_DRAG_PARAM_receivedString\"><block type=\"argument_reporter_string\" deletable=\"false\"><mutation localizationname=\"radio.onReceivedString|handlerParam|receivedString\"></mutation><field name=\"VALUE\">receivedString</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"argument_reporter_string\"><mutation localizationname=\"radio.onReceivedString|handlerParam|receivedString\"></mutation><field name=\"VALUE\">receivedString</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">asdasd</field></shadow></value></block></value></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":0,"diffs":[[1,"radio.onReceivedString(function (receivedString) {\n    if (receivedString == \"asdasd\") {\n    \t\n    }\n})\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":2,"length1":22,"diffs":[[1,"    \"name\": \"Untitled\",\n"]]}]}]},{"timestamp":1756974727272,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"custom.ts","patch":[{"start1":1798,"length1":175,"diffs":[[1,""]]}]},{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":2134,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"32\" y=\"52\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"31\" y=\"300\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">kdkdkd</field></shadow></value></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":68,"diffs":[[1,""]]},{"start1":43,"length1":0,"diffs":[[1,"    if (data == \"kdkdkd\") {\n    \t\n    }\n"]]},{"start1":346,"length1":18,"diffs":[[1,""]]}]}]},{"timestamp":1756998875512,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":2134,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"437\" y=\"210\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-20\" y=\"305\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1757060917744,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":111,"length1":2,"diffs":[[1,"    MQTT.setPinIfMatch(MQTT.PinChannel.P0, data)\n    MQTT.setPinIfMatch(MQTT.PinChannel.P13, data)\n    MQTT.setPinIfMatch(MQTT.PinChannel.P15, data)\n"]]}]}]},{"timestamp":1757060922255,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":2857,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></next></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-20\" y=\"305\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"662\" y=\"273\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":111,"length1":34,"diffs":[[1,"\t\n"]]}]}]},{"timestamp":1757060976326,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":504,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1757062380407,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"custom.ts","patch":[{"start1":2866,"length1":52,"diffs":[[1,"    //% block=\"set Pin %pin| if data matches %data\"\n"]]}]}]},{"timestamp":1757062416820,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"custom.ts","patch":[{"start1":2866,"length1":45,"diffs":[[1,"    //% block=\"Pin Pin %pin| if data matches %data\"\n"]]}]},{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":3639,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"-11\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"662\" y=\"273\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-12\" y=\"364\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow></value></block></value></block></statement></block><block type=\"MQTT_setPinIfMatch\" disabled-reasons=\"pxt_automatic_disabled\" x=\"459\" y=\"485\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\" disabled-reasons=\"pxt_automatic_disabled\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\" disabled-reasons=\"pxt_automatic_disabled\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\" disabled-reasons=\"pxt_automatic_disabled\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\" disabled-reasons=\"pxt_automatic_disabled\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\" disabled-reasons=\"pxt_automatic_disabled\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":111,"length1":150,"diffs":[[1,"    if (data == \"\") {\n    \t\n"]]},{"start1":145,"length1":96,"diffs":[[1,""]]},{"start1":148,"length1":60,"diffs":[[1,""]]},{"start1":196,"length1":32,"diffs":[[1,""]]},{"start1":277,"length1":54,"diffs":[[1,""]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":2,"length1":28,"diffs":[[1,"    \"name\": \"finish\",\n"]]},{"start1":504,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1757062987662,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":506,"length1":63,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"InwO\", \"11222222\")\n"]]}]}]},{"timestamp":1757066538903,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":404,"length1":2857,"diffs":[[1,"ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\n"]]}]}]},{"timestamp":1757066538907,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":404,"length1":2867,"diffs":[[1,"ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">ญnwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\n"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":506,"length1":73,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"ญnwO\", \"11222222\")\n"]]}]}]},{"timestamp":1757067046207,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":404,"length1":2872,"diffs":[[1,"ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">PADA EDUCATION</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">padabook</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\n"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":506,"length1":78,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"PADA EDUCATION\", \"padabook\")\n"]]}]}]},{"timestamp":1757067503790,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":404,"length1":2857,"diffs":[[1,"ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">Pada Education 1_5G</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">padabook</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\n"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":506,"length1":63,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"Pada Education 1_5G\", \"padabook\")\n"]]}]}]},{"timestamp":1757067837778,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":506,"length1":60,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"InwO\", \"11222222\")\n"]]}]}]},{"timestamp":1757083290607,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":404,"length1":2854,"diffs":[[1,"ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\n"]]}]}]},{"timestamp":1757083294064,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":404,"length1":2867,"diffs":[[1,"ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">@</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\n"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":506,"length1":73,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"@\", \"11222222\")\n"]]}]}]},{"timestamp":1757083751287,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":3271,"length1":1352,"diffs":[[1,"Pin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":363,"length1":194,"diffs":[[1,""]]}]}]},{"timestamp":1757083953472,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":510,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1757084744025,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":510,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1757122966104,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":3271,"length1":1036,"diffs":[[1,"Pin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><comment pinned=\"true\" h=\"86\" w=\"200\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><comment pinned=\"true\" h=\"86\" w=\"200\">รับการสั่งงานจากหน้า\n"]]}]}]},{"timestamp":1757122966773,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"custom.ts","patch":[{"start1":2006,"length1":264,"diffs":[[1,""]]},{"start1":2866,"length1":6,"diffs":[[1,""]]}]},{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":4562,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"true\" h=\"120\" w=\"177\" x=\"-353.1840277777777\" y=\"-116.83246527777774\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">@HOME MUM</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">mum0839769690</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"651.6996527777778\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"702.6996527777778\">รับการสั่งงานจากหน้า\n"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":68,"length1":79,"diffs":[[1,""]]},{"start1":700,"length1":73,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"@HOME MUM\", \"mum0839769690\")\n"]]}]}]},{"timestamp":1757123514634,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":405,"length1":3113,"diffs":[[1,"ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-443.90625\" y=\"80.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">PADA EDUCATION</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">padabook</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-309.7048611111111\" y=\"219.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-662\" y=\"153\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"device_button_event\" x=\"427\" y=\"325\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">byMicrobit</field></shadow></value></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-64\" y=\"365\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-401.64496527777777\" y=\"387.40625\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-398.6458333333333\" y=\"659.7065972222223\">รับการสั่งงานจากหน้า\n"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":779,"length1":63,"diffs":[[1,"MQTT.setConnectionInfo(\"microbit-control\", \"PADA EDUCATION\", \"padabook\")\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":510,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1757124082779,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":3610,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"39\" y=\"53\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"true\" h=\"120\" w=\"177\" x=\"-314.1840277777777\" y=\"-63.83246527777774\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-443.90625\" y=\"80.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-309.7048611111111\" y=\"219.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-662\" y=\"153\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"device_button_event\" x=\"427\" y=\"325\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">byMicrobit</field></shadow></value></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-64\" y=\"365\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-401.64496527777777\" y=\"387.40625\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-398.6458333333333\" y=\"659.7065972222223\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-398.6458333333333\" y=\"710.7065972222223\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-398.6458333333333\" y=\"761.7065972222223\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1757127823112,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":510,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1757127823273,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"custom.ts","patch":[{"start1":2228,"length1":87,"diffs":[[1,"        basic.showString(\"Sent!\");\n"]]}]},{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":2643,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"u{l_R5vs,Gl]U1BbPoOg\">data</variable></variables><block type=\"pxt-on-start\" x=\"39\" y=\"53\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"false\" h=\"80\" w=\"160\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"false\" h=\"80\" w=\"160\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"false\" h=\"80\" w=\"160\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-662\" y=\"153\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block><block type=\"device_button_event\" x=\"427\" y=\"325\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">byMicrobit</field></shadow></value></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-64\" y=\"365\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">รับข้อมูลจากหน้า Message</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">ok</field></block></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\n"]]},{"start1":3391,"length1":1640,"diffs":[[1,"Pin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":114,"length1":22,"diffs":[[1,"    MQTT.b2MQTT(\"byMicrobit\")\n"]]},{"start1":639,"length1":17,"diffs":[[1,""]]},{"start1":929,"length1":148,"diffs":[[1,""]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":510,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1757128392547,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"custom.ts","patch":[{"start1":2039,"length1":76,"diffs":[[1,"    export function b2MQTT(data:string): void {\n        \n"]]},{"start1":2228,"length1":0,"diffs":[[1,"        basic.showString(\"S\");\n"]]}]},{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":2636,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"u{l_R5vs,Gl]U1BbPoOg\">data</variable><variable id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</variable></variables><block type=\"pxt-on-start\" x=\"-101\" y=\"-34\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"false\" h=\"80\" w=\"160\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"false\" h=\"80\" w=\"160\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"false\" h=\"80\" w=\"160\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-701\" y=\"100\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-103\" y=\"312\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">รับข้อมูลจากหน้า Message</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">ok</field></block></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\n"]]},{"start1":3211,"length1":1780,"diffs":[[1,"Pin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"457\" y=\"295\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Hi</field></shadow></value></block></statement></block><block type=\"device_temperature\" disabled-reasons=\"pxt_automatic_disabled\" x=\"753\" y=\"331\"></block><block type=\"device_forever\" x=\"458\" y=\"480\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P14</field></shadow></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Find Object</field></shadow></value></block></statement></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":1077,"length1":26,"diffs":[[1,""]]}]}]},{"timestamp":1757128986214,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":3204,"length1":2004,"diffs":[[1,"Pin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"558\" y=\"329\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Hi</field></shadow></value></block></statement></block><block type=\"device_temperature\" disabled-reasons=\"pxt_automatic_disabled\" x=\"854\" y=\"365\"></block><block type=\"device_forever\" x=\"559\" y=\"514\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P14</field></shadow></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Find Object</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":114,"length1":48,"diffs":[[1,"    MQTT.b2MQTT(\"Hi\")\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":510,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1757129104651,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":6560,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"u{l_R5vs,Gl]U1BbPoOg\">data</variable><variable id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"false\" h=\"80\" w=\"160\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"false\" h=\"80\" w=\"160\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"false\" h=\"80\" w=\"160\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-600\" y=\"134\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-2\" y=\"346\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">รับข้อมูลจากหน้า Message</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">ok</field></block></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\nPin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\nPin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\nPin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"558\" y=\"329\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Hi</field></shadow><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">temp :</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\" disabled-reasons=\"pxt_automatic_disabled\"><field name=\"TEXT\">World</field></shadow><block type=\"device_temperature\"></block></value></block></value></block></statement></block><block type=\"device_forever\" x=\"559\" y=\"514\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P14</field></shadow></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Find Object</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1757131531050,"editorVersion":"8.0.16","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":256,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1756913859301,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n            }\n        });\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    //% block=\"set Pin %pin| if data matches %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"Untitled\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1756997760125,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"32\" y=\"52\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"31\" y=\"300\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">kdkdkd</field></shadow></value></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n            }\n        });\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    //% block=\"set Pin %pin| if data matches %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"finish\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1757060917744,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><next><block type=\"MQTT_setConnectionInfo\"><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"437\" y=\"210\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-20\" y=\"305\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></statement></block></xml>","main.ts":"","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n                if (processedData === \"WIFI_CONNECTED\"){\n                    basic.showIcon(IconNames.Yes)\n                    basic.showString(\"WIFI-OK\");\n                }\n\n            }\n        });\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    //% block=\"set Pin %pin| if data matches %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"finish\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1757062718199,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"34\" y=\"29\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"true\" h=\"120.33419799804688\" w=\"177.04425048828125\" x=\"-318.86979166666663\" y=\"-88.15190972222219\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109.15365600585938\" w=\"166.545166015625\" x=\"-314.390625\" y=\"195.09982638888886\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-572\" y=\"189\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109.15365600585938\" w=\"166.545166015625\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"29\" y=\"335\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134.21875\" w=\"205.23004150390625\" x=\"-308.41753472222223\" y=\"356.90451388888886\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86.44097900390625\" w=\"200.14752197265625\" x=\"-305.41840277777777\" y=\"629.2048611111111\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></statement></block></xml>","main.ts":"","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n                if (processedData === \"WIFI_CONNECTED\"){\n                    basic.showIcon(IconNames.Yes)\n                    basic.showString(\"WIFI-OK\");\n                }\n\n            }\n        });\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    //% block=\"Pin Control %pin| with %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"finish\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1757066538903,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"true\" h=\"120\" w=\"177\" x=\"-353.1840277777777\" y=\"-116.83246527777774\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></statement></block></xml>","main.ts":"","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n                if (processedData === \"WIFI_CONNECTED\"){\n                    basic.showIcon(IconNames.Yes)\n                    basic.showString(\"WIFI-OK\");\n                }\n\n            }\n        });\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    //% block=\"Pin Control %pin| with %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"Mqtt-blickly\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1757083290607,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"true\" h=\"120\" w=\"177\" x=\"-353.1840277777777\" y=\"-116.83246527777774\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></statement></block></xml>","main.ts":"","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n                if (processedData === \"WIFI_CONNECTED\"){\n                    basic.showIcon(IconNames.Yes)\n                    basic.showString(\"WIFI-OK\");\n                }\n\n            }\n        });\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    //% block=\"Pin Control %pin| with %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"Mqtt-blickly\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1757122966104,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"true\" h=\"120\" w=\"177\" x=\"-353.1840277777777\" y=\"-116.83246527777774\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-482.90625\" y=\"27.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">@HOME MUM</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">mum0839769690</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-348.7048611111111\" y=\"166.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-606\" y=\"160\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-5\" y=\"306\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-342.7109375\" y=\"328.39930555555554\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-339.71180555555554\" y=\"600.6996527777778\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><comment pinned=\"true\" h=\"86\" w=\"200\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><comment pinned=\"true\" h=\"86\" w=\"200\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"input.onButtonPressed(Button.A, function () {\n    MQTT.connect()\n})\nMQTT.onEsp32DataReceived(function (data) {\n    // รับข้อมูลจากหน้า Message\n    if (data == \"ok\") {\n        basic.showIcon(IconNames.Heart)\n        basic.pause(1000)\n        basic.clearScreen()\n    }\n    // รับการสั่งงานจากหน้า\n    // Pin Control\n    MQTT.setPinIfMatch(MQTT.PinChannel.P0, data)\n    // รับการสั่งงานจากหน้า\n    // Pin Control\n    MQTT.setPinIfMatch(MQTT.PinChannel.P13, data)\n    // รับการสั่งงานจากหน้า\n    // Pin Control\n    MQTT.setPinIfMatch(MQTT.PinChannel.P15, data)\n})\n// set ขาเชื่อมต่อ\n// ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx\nMQTT.initializeUART(SerialPin.P1, SerialPin.P2)\n// ตั้ง uniqueId ใช้ตั้งกับ web\nMQTT.setConnectionInfo(\"microbit-control\", \"@HOME MUM\", \"mum0839769690\")\nbasic.pause(2000)\n// สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ\nMQTT.connect()\n","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n                if (processedData === \"WIFI_CONNECTED\"){\n                    basic.showIcon(IconNames.Yes)\n                    basic.showString(\"WIFI-OK\");\n                }\n\n            }\n        });\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    //% block=\"Pin Control %pin| with %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"Mqtt-blickly\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1757127823112,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kaz+=CQhAaHiaY%;,Icw\">data</variable></variables><block type=\"pxt-on-start\" x=\"39\" y=\"53\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"true\" h=\"120\" w=\"177\" x=\"-314.1840277777777\" y=\"-63.83246527777774\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-385.6840277777777\",\"~commentOffsetY\":\"-190.33246527777774\"}}</data><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"true\" h=\"80\" w=\"256\" x=\"-443.90625\" y=\"80.51996527777777\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-515.40625\",\"~commentOffsetY\":\"-95.48003472222223\"}}</data><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"true\" h=\"109\" w=\"166\" x=\"-309.7048611111111\" y=\"219.41927083333331\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-381.2048611111111\",\"~commentOffsetY\":\"-52.580729166666686\"}}</data></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-662\" y=\"153\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></statement></block><block type=\"device_button_event\" x=\"427\" y=\"325\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">byMicrobit</field></shadow></value></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-64\" y=\"365\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"true\" h=\"134\" w=\"205\" x=\"-401.64496527777777\" y=\"387.40625\">รับข้อมูลจากหน้า Message</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-370.2109375\",\"~commentOffsetY\":\"-66.10069444444446\"}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><value name=\"B\"><shadow type=\"text\"><field name=\"TEXT\">ok</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-398.6458333333333\" y=\"659.7065972222223\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-398.6458333333333\" y=\"710.7065972222223\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><comment pinned=\"true\" h=\"86\" w=\"200\" x=\"-398.6458333333333\" y=\"761.7065972222223\">รับการสั่งงานจากหน้า\nPin Control</comment><data>{\"commentRefs\":[],\"fieldData\":{\"~commentOffsetX\":\"-367.21180555555554\",\"~commentOffsetY\":\"-38.80034722222217\"}}</data><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get_reporter\"><field name=\"VAR\" id=\"kaz+=CQhAaHiaY%;,Icw\">data</field></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"input.onButtonPressed(Button.A, function () {\n    MQTT.connect()\n})\ninput.onButtonPressed(Button.B, function () {\n    MQTT.b2MQTT(\"byMicrobit\")\n})\nMQTT.onEsp32DataReceived(function (data) {\n    // รับข้อมูลจากหน้า Message\n    if (data == \"ok\") {\n        basic.showIcon(IconNames.Heart)\n        basic.pause(1000)\n        basic.clearScreen()\n    }\n    // รับการสั่งงานจากหน้า\n    // Pin Control\n    MQTT.setPinIfMatch(MQTT.PinChannel.P0, data)\n    // รับการสั่งงานจากหน้า\n    // Pin Control\n    MQTT.setPinIfMatch(MQTT.PinChannel.P13, data)\n    // รับการสั่งงานจากหน้า\n    // Pin Control\n    MQTT.setPinIfMatch(MQTT.PinChannel.P15, data)\n})\n// set ขาเชื่อมต่อ\n// ของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx\nMQTT.initializeUART(SerialPin.P1, SerialPin.P2)\n// ตั้ง uniqueId ใช้ตั้งกับ web\nMQTT.setConnectionInfo(\"microbit-control\", \"InwO\", \"11222222\")\nbasic.pause(2000)\n// สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ\nMQTT.connect()\n","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n                if (processedData === \"WIFI_CONNECTED\"){\n                    basic.showIcon(IconNames.Yes)\n                    basic.showString(\"WIFI-OK\");\n                }\n\n            }\n        });\n    }\n\n\n    //% block=\"sent data %data\"\n    export function b2MQTT(data:string): void {\n        \n        let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"data\":\"' +data+'\"}';\n        serial.writeLine(status_json + \"\\n\");\n        basic.showString(\"Sent!\");\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    \n\n    //% block=\"Pin Control %pin| with %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"Mqtt-blickly\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1757131531050,"editorVersion":"8.0.16","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"u{l_R5vs,Gl]U1BbPoOg\">data</variable><variable id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"MQTT_initializeUART\"><field name=\"tx\">SerialPin.P1</field><field name=\"rx\">SerialPin.P2</field><comment pinned=\"false\" h=\"80\" w=\"160\">set ขาเชื่อมต่อ\nของGigo บนซ้ายเป็น Tx ล่างซ้ายเป็น Rx</comment><next><block type=\"MQTT_setConnectionInfo\"><comment pinned=\"false\" h=\"80\" w=\"160\">ตั้ง uniqueId ใช้ตั้งกับ web</comment><value name=\"uniqueId\"><shadow type=\"text\"><field name=\"TEXT\">microbit-control</field></shadow></value><value name=\"ssid\"><shadow type=\"text\"><field name=\"TEXT\">InwO</field></shadow></value><value name=\"password\"><shadow type=\"text\"><field name=\"TEXT\">11222222</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value><next><block type=\"MQTT_connect\"><comment pinned=\"false\" h=\"80\" w=\"160\">สำหรับใช้แยก เช่น ใช้ปุ่ม A ในการเริ่มการเชื่อมต่อ</comment></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"-600\" y=\"134\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"MQTT_connect\"></block></statement></block><block type=\"MQTT_onEsp32DataReceived\" x=\"-2\" y=\"346\"><value name=\"HANDLER_DRAG_PARAM_data\"><block type=\"variables_get_reporter\" deletable=\"false\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><statement name=\"HANDLER\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">รับข้อมูลจากหน้า Message</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">ok</field></block></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P0</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\nPin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P13</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\nPin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value><next><block type=\"MQTT_setPinIfMatch\"><field name=\"pin\">MQTT.PinChannel.P15</field><comment pinned=\"false\" h=\"80\" w=\"160\">รับการสั่งงานจากหน้า\nPin Control</comment><value name=\"data\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u{l_R5vs,Gl]U1BbPoOg\">data</field></block></value></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"558\" y=\"329\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Hi</field></shadow><block type=\"text_join\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">temp :</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\" disabled-reasons=\"pxt_automatic_disabled\"><field name=\"TEXT\">World</field></shadow><block type=\"device_temperature\"></block></value></block></value></block></statement></block><block type=\"device_forever\" x=\"559\" y=\"514\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P14</field></shadow></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"c3mn(qQ$g~j40dWDdB}*\">ir-sensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"MQTT_b2MQTT\"><value name=\"data\"><shadow type=\"text\"><field name=\"TEXT\">Find Object</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></next></block></statement></block></xml>","main.ts":"","README.md":"","custom.ts":"//% color=\"#AA278D\" weight=100\nnamespace MQTT {\n    \n    let uniqueId_var = \"\";\n    let ssid_var = \"\";\n    let password_var = \"\";\n    let mqttBroker_var = \"broker.hivemq.com\";\n    let mqttPort_var = \"1883\";\n    let onReceivedHandler: (data: string) => void;\n    \n    //% block=\"set connection info uniqueId %uniqueId|SSID %ssid|Password %password\"\n    //% uniqueId.defl=\"microbit-control\"\n    //% ssid.defl=\"InwO\"\n    //% password.defl=\"11222222\"\n    export function setConnectionInfo(uniqueId: string, ssid: string, password: string): void {\n        uniqueId_var = uniqueId;\n        ssid_var = ssid;\n        password_var = password;\n    }\n    \n    //% block=\"initialize UART Tx pin %tx|Rx pin %rx\"\n    //% tx.defl=SerialPin.P1\n    //% rx.defl=SerialPin.P2\n    export function initializeUART(tx: SerialPin, rx: SerialPin): void {\n        // Initialize UART with the provided pins\n        serial.redirect(\n            tx,\n            rx,\n            BaudRate.BaudRate115200\n        );\n        basic.pause(100); // Small pause for serial to be ready\n    }\n    \n    //% block=\"connect\"\n    export function connect(): void {\n        basic.pause(3000)\n        let config_data = \"CONFIG_DATA:\" + uniqueId_var + \",\" + ssid_var + \",\" + password_var + \",\" + mqttBroker_var + \",\" + mqttPort_var;\n        serial.writeLine(config_data);\n        basic.showString(\"Config Sent!\");\n    }\n\n    //% block=\"on MQTT data received\"\n    //% draggableParameters\n    export function onEsp32DataReceived(handler: (data: string) => void): void {\n        onReceivedHandler = handler;\n        serial.onDataReceived('\\n', function () {\n            let receivedData = serial.readLine();\n            let processedData = receivedData.trim();\n            if (onReceivedHandler) {\n                onReceivedHandler(processedData);\n                if (processedData === \"WIFI_CONNECTED\"){\n                    basic.showIcon(IconNames.Yes)\n                    basic.showString(\"WIFI-OK\");\n                }\n\n            }\n        });\n    }\n\n\n    //% block=\"sent data %data\"\n    export function b2MQTT(data:any): void {\n        basic.showString(\"S\");\n        let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"data\":\"' +data+'\"}';\n        serial.writeLine(status_json + \"\\n\");\n        basic.pause(300);\n        basic.clearScreen();\n\n    }\n\n    // --- ส่วนโค้ดสำหรับบล็อกที่มีเมนูให้เลือก (Dropdown) ---\n    export enum PinChannel {\n        //% block=\"P0\"\n        P0,\n        //% block=\"P1\"\n        P1,\n        //% block=\"P2\"\n        P2,\n        //% block=\"P8\"\n        P8,\n        //% block=\"P12\"\n        P12,\n        //% block=\"P13\"\n        P13,\n        //% block=\"P14\"\n        P14,\n        //% block=\"P15\"\n        P15,\n        //% block=\"P16\"\n        P16,\n    }\n\n    let PinChannels: { [key: number]: DigitalPin } = {\n        [PinChannel.P0]: DigitalPin.P0,\n        [PinChannel.P1]: DigitalPin.P1,\n        [PinChannel.P2]: DigitalPin.P2,\n        [PinChannel.P8]: DigitalPin.P8,\n        [PinChannel.P12]: DigitalPin.P12,\n        [PinChannel.P13]: DigitalPin.P13,\n        [PinChannel.P14]: DigitalPin.P14,\n        [PinChannel.P15]: DigitalPin.P15,\n        [PinChannel.P16]: DigitalPin.P16,\n    }\n    \n    \n\n    //% block=\"Pin Control %pin| with %data\"\n    //% pin.fieldEditor=\"gridpicker\"\n    //% pin.fieldOptions.columns=3\n    \n    export function setPinIfMatch(pin: PinChannel, data: string): void {\n        const parts = data.split(\"=\");\n        if (parts.length === 2) {\n            const pinName = parts[0];\n            const value = parseInt(parts[1], 10);\n            \n            let selectedPinName: string;\n            switch(pin) {\n                case PinChannel.P0: selectedPinName = \"P0\"; break;\n                case PinChannel.P1: selectedPinName = \"P1\"; break;\n                case PinChannel.P2: selectedPinName = \"P2\"; break;\n                case PinChannel.P8: selectedPinName = \"P8\"; break;\n                case PinChannel.P12: selectedPinName = \"P12\"; break;\n                case PinChannel.P13: selectedPinName = \"P13\"; break;\n                case PinChannel.P14: selectedPinName = \"P14\"; break;\n                case PinChannel.P15: selectedPinName = \"P15\"; break;\n                case PinChannel.P16: selectedPinName = \"P16\"; break;\n            }\n            \n            if (pinName === selectedPinName) {\n                pins.digitalWritePin(PinChannels[pin], value);\n                \n                // สร้างและส่งข้อความ JSON กลับไป\n                let status_json = '{\"deviceId\": \"' + uniqueId_var + '\", \"pins\": {\"' + selectedPinName + '\": ' + value + '}}';\n                serial.writeLine(status_json + \"\\n\");\n            }\n        }\n    }\n}","pxt.json":"{\n    \"name\": \"Mqtt-blickly\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"custom.ts\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"stable8.0\",\n        \"tag\": \"v8.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/70751e3ce10c755c0c803f5669b12b52539ce5b0\",\n        \"target\": \"8.0.16\",\n        \"pxt\": \"12.0.16\"\n    },\n    \"preferredEditor\": \"blocksprj\"\n}\n"}}],"shares":[],"lastSaveTime":1757131531055}